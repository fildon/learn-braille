"use strict";(()=>{var J=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var m=(r,t,e)=>t in r?J(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,h=(r,t)=>{for(var e in t||={})L.call(t,e)&&m(r,e,t[e]);if(p)for(var e of p(t))_.call(t,e)&&m(r,e,t[e]);return r},w=(r,t)=>T(r,V(t));var x=r=>r%2===1?"box1":r%4===2?"box2":r%8===4?"box3":r%16===8?"box4":r%32===16?"box5":r%64===32?"box6":"box7";var u=[{id:"01",front:"\u2801",back:"A",learningState:"ready"},{id:"02",front:"\u2803",back:"B",learningState:"ready"},{id:"03",front:"\u2809",back:"C",learningState:"ready"},{id:"04",front:"\u2819",back:"D",learningState:"ready"},{id:"05",front:"\u2811",back:"E",learningState:"ready"},{id:"06",front:"\u280B",back:"F",learningState:"ready"},{id:"07",front:"\u281B",back:"G",learningState:"ready"},{id:"08",front:"\u2813",back:"H",learningState:"ready"},{id:"09",front:"\u280A",back:"I",learningState:"ready"},{id:"10",front:"\u281A",back:"J",learningState:"ready"},{id:"11",front:"\u2805",back:"K",learningState:"ready"},{id:"12",front:"\u2807",back:"L",learningState:"ready"},{id:"13",front:"\u280D",back:"M",learningState:"ready"},{id:"14",front:"\u281D",back:"N",learningState:"ready"},{id:"15",front:"\u2815",back:"O",learningState:"ready"},{id:"16",front:"\u280F",back:"P",learningState:"ready"},{id:"17",front:"\u281F",back:"Q",learningState:"ready"},{id:"18",front:"\u2817",back:"R",learningState:"ready"},{id:"19",front:"\u280E",back:"S",learningState:"ready"},{id:"20",front:"\u281E",back:"T",learningState:"ready"},{id:"21",front:"\u2825",back:"U",learningState:"ready"},{id:"22",front:"\u2827",back:"V",learningState:"ready"},{id:"23",front:"\u283A",back:"W",learningState:"ready"},{id:"24",front:"\u282D",back:"X",learningState:"ready"},{id:"25",front:"\u283D",back:"Y",learningState:"ready"},{id:"26",front:"\u2835",back:"Z",learningState:"ready"}],B=r=>r!==null&&typeof r=="object",q=r=>B(r)&&typeof r.id=="string"&&typeof r.front=="string"&&typeof r.back=="string"&&["ready",...Array.from({length:7}).map((t,e)=>`box${e+1}`),"retired"].includes(r.learningState),I=r=>B(r)&&Array.isArray(r)&&r.every(t=>q(t)),M=r=>t=>{let e=r(t);if(e===null)return!1;try{let o=JSON.parse(e);return I(o)}catch(o){return!1}},P=r=>{var f;let t=parseInt((f=r("step"))!=null?f:"");if(Number.isNaN(t))return!1;let e=["ready",...Array.from({length:7}).map((c,a)=>`box${a+1}`),"retired"];return!(!e.every(M(r))||e.flatMap(c=>JSON.parse(r(c))).length<u.length)},R=r=>{r("step","1"),r("ready",JSON.stringify(u)),Array.from({length:7}).map((e,o)=>`box${o+1}`).forEach(e=>r(e,"[]")),r("retired","[]")},N=({getItem:r,setItem:t})=>{let e=()=>{var n;let a=parseInt((n=r("step"))!=null?n:"");return Number.isNaN(a)?(t("step","1"),1):a},o=a=>JSON.parse(r(a)),S=()=>{let a=e(),n=a;if(x(n)==="box1"){let y=o("box1"),k=o("ready");y.length===0&&k.length>0&&k.slice(0,5).forEach(v=>c(v,"box1"))}let b=o("retired");if(b.length===u.length)return b;let l=o(x(n));for(;l.length===0;)n++,l=o(x(n));return n=(n-1)%64+1,a!==n&&t("step",n.toString()),l},f=()=>(P(r)||R(t),S()[0]),c=(a,n)=>{let C=o(a.learningState);t(a.learningState,JSON.stringify(C.filter(({id:y})=>y!==a.id)));let b=o(n),l=w(h({},a),{learningState:n});t(n,JSON.stringify([...b,l]))};return{getStep:e,getCurrentCard:f,setCardTo:c}};var $={ready:"box1",box1:"box2",box2:"box3",box3:"box4",box4:"box5",box5:"box6",box6:"box7",box7:"retired",retired:"retired"},A=(r,t,e)=>(t(r,$[r.learningState]),e()),K=(r,t,e)=>(t(r,"box1"),e());var i=document.querySelector("button#check"),E=document.querySelector("button#wrong"),O=document.querySelector("button#right");if(!i)throw new Error("Could not find main element");if(!E)throw new Error("Could not find wrong element");if(!O)throw new Error("Could not find right element");var g=N({getItem:r=>window.localStorage.getItem(r),setItem:(r,t)=>window.localStorage.setItem(r,t)}),d=g.getCurrentCard(),s=!0;i.textContent=d.front;i.addEventListener("click",()=>{s=!s,i.textContent=s?d.front:d.back});E.addEventListener("click",()=>{s=!0,d=K(d,(t,e)=>g.setCardTo(t,e),()=>g.getCurrentCard()),i.textContent=d.front});O.addEventListener("click",()=>{s=!0,d=A(d,(t,e)=>g.setCardTo(t,e),()=>g.getCurrentCard()),i.textContent=d.front});})();
