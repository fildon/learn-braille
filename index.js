"use strict";(()=>{var N=Object.defineProperty,z=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var y=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a=(e,t)=>{for(var r in t||={})F.call(t,r)&&y(e,r,t[r]);if(f)for(var r of f(t))K.call(t,r)&&y(e,r,t[r]);return e},i=(e,t)=>z(e,E(t));var d=e=>e.map(t=>({item:t,rank:Math.random()})).sort((t,r)=>t.rank-r.rank).map(({item:t})=>t),S=e=>e[Math.floor(Math.random()*e.length)];var s=e=>e!==null&&typeof e=="object",L=e=>s(e)&&typeof e.id=="string"&&typeof e.front=="string"&&typeof e.back=="string"&&["ready",...Array.from({length:7}).map((t,r)=>`box${r+1}`),"retired"].includes(e.learningState),D=e=>s(e)&&Array.isArray(e)&&e.every(t=>L(t)),M=e=>s(e)&&e.version==="3"&&typeof e.step=="number"&&!Number.isNaN(e.step)&&D(e.cards),c=e=>({learningState:t})=>t===e,O=({version:e,step:t,cards:r,currentCard:o,guesses:b})=>({version:e,step:t,currentCard:o,guesses:b,ready:r.filter(c("ready")),box1:r.filter(c("box1")),box2:r.filter(c("box2")),box3:r.filter(c("box3")),box4:r.filter(c("box4")),box5:r.filter(c("box5")),box6:r.filter(c("box6")),box7:r.filter(c("box7")),retired:r.filter(c("retired"))}),m=e=>{let t=JSON.parse(e);if(M(t))return O(t);throw new Error("Error parsing state")},C=e=>{let t=[e.ready,e.box1,e.box2,e.box3,e.box4,e.box5,e.box6,e.box7,e.retired].flat(),r={version:e.version,step:e.step,currentCard:e.currentCard,guesses:e.guesses,cards:t};return JSON.stringify(r)},Y=[{id:"01",front:"\u2801",back:"A",learningState:"ready"},{id:"02",front:"\u2803",back:"B",learningState:"ready"},{id:"03",front:"\u2809",back:"C",learningState:"ready"},{id:"04",front:"\u2819",back:"D",learningState:"ready"},{id:"05",front:"\u2811",back:"E",learningState:"ready"},{id:"06",front:"\u280B",back:"F",learningState:"ready"},{id:"07",front:"\u281B",back:"G",learningState:"ready"},{id:"08",front:"\u2813",back:"H",learningState:"ready"},{id:"09",front:"\u280A",back:"I",learningState:"ready"},{id:"10",front:"\u281A",back:"J",learningState:"ready"},{id:"11",front:"\u2805",back:"K",learningState:"ready"},{id:"12",front:"\u2807",back:"L",learningState:"ready"},{id:"13",front:"\u280D",back:"M",learningState:"ready"},{id:"14",front:"\u281D",back:"N",learningState:"ready"},{id:"15",front:"\u2815",back:"O",learningState:"ready"},{id:"16",front:"\u280F",back:"P",learningState:"ready"},{id:"17",front:"\u281F",back:"Q",learningState:"ready"},{id:"18",front:"\u2817",back:"R",learningState:"ready"},{id:"19",front:"\u280E",back:"S",learningState:"ready"},{id:"20",front:"\u281E",back:"T",learningState:"ready"},{id:"21",front:"\u2825",back:"U",learningState:"ready"},{id:"22",front:"\u2827",back:"V",learningState:"ready"},{id:"23",front:"\u283A",back:"W",learningState:"ready"},{id:"24",front:"\u282D",back:"X",learningState:"ready"},{id:"25",front:"\u283D",back:"Y",learningState:"ready"},{id:"26",front:"\u2835",back:"Z",learningState:"ready"},{id:"27",front:"\u2802",back:",",learningState:"ready"},{id:"28",front:"\u2806",back:";",learningState:"ready"},{id:"29",front:"\u2812",back:":",learningState:"ready"},{id:"30",front:"\u2832",back:". (period)",learningState:"ready"},{id:"31",front:"\u2828",back:". (decimal)",learningState:"ready"},{id:"32",front:"\u2816",back:"!",learningState:"ready"},{id:"33",front:"\u282F",back:"&",learningState:"ready"},{id:"34",front:"\u283C",back:"# (number mode)",learningState:"ready"},{id:"35",front:"\u2837",back:"(",learningState:"ready"},{id:"36",front:"\u283E",back:")",learningState:"ready"},{id:"37",front:"\u2826",back:"?",learningState:"ready"}],k=()=>{let e=d(Y);return{version:"3",step:1,currentCard:i(a({},e[0]),{learningState:"box1"}),guesses:[e[1],e[2],e[3]],ready:e.slice(5),box1:e.slice(0,5).map(t=>i(a({},t),{learningState:"box1"})),box2:[],box3:[],box4:[],box5:[],box6:[],box7:[],retired:[]}};var x=e=>e%2===1?"box1":e%4===2?"box2":e%8===4?"box3":e%16===8?"box4":e%32===16?"box5":e%64===32?"box6":"box7";var g=(e,t,r)=>t.learningState===r?e:i(a({},e),{[t.learningState]:e[t.learningState].filter(({id:o})=>o!==t.id),[r]:[...e[r],i(a({},t),{learningState:r})]}),$=e=>e.box1.length>0||e.box2.length>0||e.ready.length===0?e:d(e.ready).slice(0,5).reduce((o,b)=>g(o,b,"box1"),e),J=e=>e.box1.length===0&&e.box2.length===0&&e.box3.length===0&&e.box4.length===0&&e.box5.length===0&&e.box6.length===0&&e.box7.length===0,U=e=>{let t=e.step,r=e[x(t)];for(;r.length===0;)t++,r=e[x(t)];return t=(t-1)%64+1,i(a({},e),{step:t})},H=(e,t)=>{let r=e[x(e.step)];return r.length>=4?d(r.filter(o=>o.id!==t.id)).slice(0,3):d([...e.ready,...e.box1,...e.box2,...e.box3,...e.box4,...e.box5,...e.box6,...e.box7,...e.retired].filter(o=>o.id!==t.id)).slice(0,3)},p=e=>{if(J(e)){let b=d(e.retired.filter(({id:I})=>I!==e.currentCard.id))[0];return i(a({},e),{currentCard:b})}let t=U($(e)),r=t[x(t.step)],o=S(r);return i(a({},t),{guesses:H(t,o),currentCard:o})},P={ready:"box1",box1:"box2",box2:"box3",box3:"box4",box4:"box5",box5:"box6",box6:"box7",box7:"retired",retired:"retired"},h=e=>{let t=g(e,e.currentCard,P[e.currentCard.learningState]);return p(t)},G=e=>{let t=g(e,e.currentCard,"box1");return p(t)};var W=document.querySelector("#test"),q=document.querySelector("#A"),T=document.querySelector("#B"),A=document.querySelector("#C"),B=document.querySelector("#D"),w=document.querySelector("#previousResult"),_=document.querySelector("#ready"),Q=document.querySelector("#box1"),V=document.querySelector("#box2"),X=document.querySelector("#box3"),Z=document.querySelector("#box4"),j=document.querySelector("#box5"),ee=document.querySelector("#box6"),te=document.querySelector("#box7"),re=document.querySelector("#retired"),ne=document.querySelector("#currentStreak"),n,v;try{n=m((v=window.localStorage.getItem("state"))!=null?v:"")}catch(e){n=k()}var l=[],u=0,R=()=>{l=d([{text:n.currentCard.back,isCorrect:!0},...n.guesses.map(e=>({text:e.back,isCorrect:!1}))]),W.textContent=n.currentCard.front,q.textContent=l[0].text,T.textContent=l[1].text,A.textContent=l[2].text,B.textContent=l[3].text,_.textContent=n.ready.length.toString(),Q.textContent=n.box1.length.toString(),V.textContent=n.box2.length.toString(),X.textContent=n.box3.length.toString(),Z.textContent=n.box4.length.toString(),j.textContent=n.box5.length.toString(),ee.textContent=n.box6.length.toString(),te.textContent=n.box7.length.toString(),re.textContent=n.retired.length.toString(),ne.textContent=`Current streak: ${u.toString()}`};R();var oe=["Nice!","Good job!","You're the best!","Keep it up!","You're practically Dr. Braille at this point!","Amazing!","Bravo!","YESSSS","Well done!","Got it right!","Brailliant!"];[q,T,A,B].forEach((e,t)=>e.addEventListener("click",()=>{l[t].isCorrect?(w.textContent=S(oe),u++,n=h(n)):(w.textContent=`Naw. ${n.currentCard.front} is actually ${n.currentCard.back}`,u=0,n=G(n)),window.localStorage.setItem("state",C(n)),R()}));})();
